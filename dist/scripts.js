let pokemonRepository = function () { let e = []; function t(t) { "object" == typeof t && "name" in t ? e.push(t) : console.log("pokemon is not correct") } function n() { return e } function o(e) { return r(), fetch(e.detailsUrl).then(function (e) { return e.json() }).then(function (t) { a(), e.imageUrl = t.sprites.front_default, e.height = t.height, e.types = t.types }).catch(function (e) { a(), console.error(e) }) } function i(e) { o(e).then(function () { var t, n, o, i; let r; t = e, n = document.querySelector(".modal-title"), o = document.querySelector(".modal-height"), i = document.querySelector(".modal-image"), n.innerText = t.name.charAt(0).toUpperCase() + t.name.slice(1), void 0 == (r = t.height) && (console.log("Failed to load the height, Retrying..."), r = t.height), o.innerText = `Height: ${t.height}m`, i.setAttribute("src", t.imageUrl), i.onerror = function () { console.log("Failed to load image. Retrying..."), i.src = t.imageUrl }, $("#pokemonModal").modal("show") }) } function r() { let e = document.createElement("div"); e.textContent = "Loading ...", e.classList.add("loading-message"), document.body.appendChild(e) } function a() { let e = document.querySelector(".loading-message"); e && e.remove() } return { add: t, getAll: n, addListItem: function e(t) { let n = document.querySelector(".pokemon-list"), o = document.createElement("div"); o.classList.add("col-md-4", "col-lg-4", "mb-3"); let r = document.createElement("button"); r.innerText = t.name.charAt(0).toUpperCase() + t.name.slice(1), r.classList.add("btn", "btn-secondary", "btn-block"), function e(t, n) { t.addEventListener("click", function () { i(n) }) }(r, t), o.appendChild(r), n.appendChild(o) }, showDetails: i, loadList: function e() { return r(), fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(function (e) { return e.json() }).then(function (e) { a(), e.results.forEach(function (e) { t({ name: e.name, detailsUrl: e.url }) }) }).catch(function (e) { a(), console.error(e) }) }, loadDetails: o, showLoadingMessage: r, hideLoadingMessage: a } }(); pokemonRepository.loadList().then(function () { pokemonRepository.getAll().forEach(function (e) { pokemonRepository.addListItem(e) }) });