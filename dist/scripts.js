let pokemonRepository = function () { let e = []; function t(t) { "object" == typeof t && "name" in t ? e.push(t) : console.log("pokemon is not correct") } function n(e) { return l(), fetch(e.detailsUrl).then(function (e) { return e.json() }).then(function (t) { r(), e.imageUrl = t.sprites.front_default, e.height = t.height, e.types = t.types }).catch(function (e) { r(), console.error(e) }) } function o(e) { n(e).then(function () { !function e(t) { var n = document.querySelector(".modal-title"), o = document.querySelector(".modal-height"), l = document.querySelector(".modal-image"), r = document.querySelector(".modal-type"); n.innerText = t.name.charAt(0).toUpperCase() + t.name.slice(1); let a = t.height; void 0 == a && (console.log("Failed to load the height, Retrying..."), a = t.height), o.innerText = `Height: ${t.height}m`; let s = t.types; for (void 0 == s && (console.log("Failed to load the types, Retrying..."), s = t.types), r.innerText = s.length < 2 ? "Type: " : "Types: ", i = 0; i < s.length; i++)r.innerText += s[i].type.name + ", "; r.innerText = r.innerText.slice(0, -2), l.setAttribute("src", t.imageUrl), l.onerror = function () { console.log("Failed to load image. Retrying..."), l.src = t.imageUrl }, $("#pokemonModal").modal("show") }(e) }) } function l() { let e = document.createElement("div"); e.textContent = "Loading ...", e.classList.add("loading-message"), document.body.appendChild(e) } function r() { let e = document.querySelector(".loading-message"); e && e.remove() } return { add: t, getAll: function t() { return e.sort((e, t) => e.name.localeCompare(t.name)) }, addListItem: function e(t) { let n = document.querySelector(".pokemon-list"), l = document.createElement("div"); l.classList.add("col-md-6", "col-lg-4", "col-xl-3", "mb-3"); let r = document.createElement("button"); r.classList.add("btn", "btn-secondary", "btn-block", "d-flex", "flex-column", "align-items-center"), function e(t, n) { t.addEventListener("click", function () { o(n) }) }(r, t); let a = document.createElement("img"); a.src = t.imageUrl, a.alt = t.name, a.classList.add("pokemon-image", "mb-2"), r.appendChild(a); let s = document.createElement("span"); s.innerText = t.name.charAt(0).toUpperCase() + t.name.slice(1), r.appendChild(s), l.appendChild(r), n.appendChild(l) }, showDetails: o, loadList: function e() { return l(), fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(function (e) { return e.json() }).then(function (e) { return r(), Promise.all(e.results.map(function (e) { return fetch(e.url).then(function (e) { return e.json() }).then(function (n) { t({ name: n.name, detailsUrl: e.url, imageUrl: n.sprites.front_default, height: n.height, types: n.types }) }) })) }).catch(function (e) { r(), console.error(e) }) }, loadDetails: n, showLoadingMessage: l, hideLoadingMessage: r } }(); pokemonRepository.loadList().then(function () { pokemonRepository.getAll().forEach(function (e) { pokemonRepository.addListItem(e) }) });